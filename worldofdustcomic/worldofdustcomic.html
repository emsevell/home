<!DOCTYPE html> 
<html>

 <head>
  <link rel="stylesheet" href="stylesheet.css">
 </head>

 <body>
  <div id="pagedisplay">
   <p> 
    <div class="buttoncontainer" id="buttonsabove"> 
     <input class="b" type="image" src="assets/back2.png" id="back2" onclick="firstPage()">
     <input class="b" type="image" src="assets/back1.png" id="back1" onclick="prevPage()">
     <input class="b" type="image" src="assets/archive.png" id="archive" onclick="showArchive()">
     <input class="b" type="image" src="assets/forwards1.png" id="forwards1" onclick="nextPage()">
     <input class="b" type="image" src="assets/forwards2.png" id="forwards2" onclick="lastPage()">
    </div>
   </p>

   <p>
		
    <div id="imgdiv" class="imgcontainer">
     <input type="image" src="pages/empty.png" id="img" style="width:100%;"onclick="nextPage()">
     <!--img src="pages/1.png" id="img" style="width:100%"-->
    </div>

   </p>

   <p> 
    <div class="buttoncontainer" id="buttonsbelow">
     <input class="b" type="image" src="assets/back2.png" id="back2" onclick="firstPage()">
     <input class="b" type="image" src="assets/back1.png" id="back1" onclick="prevPage()">
     <input class="b" type="image" src="assets/archive.png" id="archive" onclick="showArchive()">
     <input class="b" type="image" src="assets/forwards1.png" id="forwards1" onclick="nextPage()">
     <input class="b" type="image" src="assets/forwards2.png" id="forwards2" onclick="lastPage()">
    </div>
   </p>
  </div>

  <div id="archivedisplay"> 

  </div>


  <script>

   var img = document.getElementById("img");
   var pagediv = document.getElementById("pagedisplay");
   var archivediv = document.getElementById("archivedisplay");
   archivediv.setAttribute("style", "display:none");


	// get current page, which should be passed into the link
	var urlParams = new URL(window.location.href).searchParams;
	var page;

	if (urlParams.has('page')) {
		page = parseInt(urlParams.get('page'));
	} else {
		page = 0;
	}

	console.log(page);


   const last = 141;

   var div = document.createElement("div");
   div.setAttribute("class", "archivecontainer");


	// this needs to be run ONLY IF it's the archive page. 
	if (page < 0) {
	   for (let i = 0; i <= last; i++) {
		var img1 = document.createElement("input");
		img1.setAttribute("type", "image");
		img1.setAttribute("class", "archivelink");
		img1.setAttribute("onclick", "switchPage(" + i + ", 0)");
		img1.setAttribute("src", "pages/" + i + ".png");
		div.appendChild(img1);
		if (i%5 == 0 || i==last) {
		 archivediv.appendChild(div);
		 div = document.createElement("div");
		 div.setAttribute("class", "archivecontainer");
		}
	   }
		pagediv.setAttribute("style", "display:none");
    	archivediv.removeAttribute("style");
	} else {
		img.setAttribute("src", "pages/" + page + ".png");
		pagediv.removeAttribute("style");
		archivediv.setAttribute("style", "display:none");
	}

	function switchPage(p) {
		var bareURL = window.location.href.split(/[?#]/)[0];
		if (!p) p = 0;
		window.location.href = (bareURL + "?page=" + p);
	}

   function showArchive() {
		switchPage(-1);
   }

   function setPage() {
    img.setAttribute("src", "pages/" + page + ".png");
   }

   function nextPage() {
	console.log("nextPage");
    if (page < last) {
     switchPage(page + 1);
    }
   }

   function prevPage() {
    if (page > 0) {
      switchPage(page - 1);
    }
   }

   function firstPage() {
    switchPage(0);
   }

   function lastPage() {
    switchPage(last);
   }

  </script>
 </body>
</html>












